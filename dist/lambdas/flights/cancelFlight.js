"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const { DynamoDB } = require('aws-sdk');
exports.handler = async function (event) {
    console.log("request:", JSON.stringify(event, undefined, 2));
    let reservationID = '';
    if (typeof event.ReserveFlightResult !== 'undefined') {
        reservationID = event.ReserveFlightResult.Payload.booking_id;
    }
    const dynamo = new DynamoDB();
    var params = {
        TableName: process.env.TABLE_NAME,
        Key: {
            'pk': { S: event.trip_id },
            'sk': { S: 'FLIGHT#' + reservationID }
        }
    };
    // Call DynamoDB to delete the item from the table
    let result = await dynamo.deleteItem(params).promise().catch((error) => {
        throw new Error(error);
    });
    console.log('deleted flight reservation:');
    console.log(result);
    return { status: "ok" };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FuY2VsRmxpZ2h0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGFtYmRhcy9mbGlnaHRzL2NhbmNlbEZsaWdodC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRzNCLFFBQUEsT0FBTyxHQUFHLEtBQUssV0FBVSxLQUFTO0lBQzdDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdELElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQztJQUN2QixJQUFJLE9BQU8sS0FBSyxDQUFDLG1CQUFtQixLQUFLLFdBQVcsRUFBRTtRQUNwRCxhQUFhLEdBQUcsS0FBSyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7S0FDOUQ7SUFFRCxNQUFNLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBRTlCLElBQUksTUFBTSxHQUFHO1FBQ1gsU0FBUyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtRQUNqQyxHQUFHLEVBQUU7WUFDSCxJQUFJLEVBQUcsRUFBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE9BQU8sRUFBQztZQUN6QixJQUFJLEVBQUcsRUFBQyxDQUFDLEVBQUUsU0FBUyxHQUFDLGFBQWEsRUFBQztTQUNwQztLQUNGLENBQUM7SUFFRixrREFBa0Q7SUFDbEQsSUFBSSxNQUFNLEdBQUcsTUFBTSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQVUsRUFBRSxFQUFFO1FBQzFFLE1BQU0sSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUdwQixPQUFPLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBQyxDQUFBO0FBQ3ZCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRHluYW1vREIgfSA9IHJlcXVpcmUoJ2F3cy1zZGsnKTtcbmV4cG9ydCB7fTtcblxuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyBmdW5jdGlvbihldmVudDphbnkpIHtcbiAgY29uc29sZS5sb2coXCJyZXF1ZXN0OlwiLCBKU09OLnN0cmluZ2lmeShldmVudCwgdW5kZWZpbmVkLCAyKSk7XG5cbiAgbGV0IHJlc2VydmF0aW9uSUQgPSAnJztcbiAgaWYgKHR5cGVvZiBldmVudC5SZXNlcnZlRmxpZ2h0UmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJlc2VydmF0aW9uSUQgPSBldmVudC5SZXNlcnZlRmxpZ2h0UmVzdWx0LlBheWxvYWQuYm9va2luZ19pZDtcbiAgfVxuXG4gIGNvbnN0IGR5bmFtbyA9IG5ldyBEeW5hbW9EQigpO1xuXG4gIHZhciBwYXJhbXMgPSB7XG4gICAgVGFibGVOYW1lOiBwcm9jZXNzLmVudi5UQUJMRV9OQU1FLFxuICAgIEtleToge1xuICAgICAgJ3BrJyA6IHtTOiBldmVudC50cmlwX2lkfSxcbiAgICAgICdzaycgOiB7UzogJ0ZMSUdIVCMnK3Jlc2VydmF0aW9uSUR9XG4gICAgfVxuICB9O1xuICBcbiAgLy8gQ2FsbCBEeW5hbW9EQiB0byBkZWxldGUgdGhlIGl0ZW0gZnJvbSB0aGUgdGFibGVcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGR5bmFtby5kZWxldGVJdGVtKHBhcmFtcykucHJvbWlzZSgpLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coJ2RlbGV0ZWQgZmxpZ2h0IHJlc2VydmF0aW9uOicpO1xuICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXG5cbiAgcmV0dXJuIHtzdGF0dXM6IFwib2tcIn1cbn07Il19